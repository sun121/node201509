{"version":3,"sources":["8.unshift.js"],"names":[],"mappings":";;AAAA,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACvB,IAAI,EAAE,GAAG,EAAE,CAAC,gBAAgB,CAAC,eAAe,CAAC,CAAC;;AAE9C,IAAI,aAAa,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC,aAAa,CAAC;AAC5D,SAAS,WAAW,CAAC,QAAQ,EAAC;AAC5B,QAAI,OAAO,GAAI,EAAE,CAAC;AAClB,MAAE,CAAC,EAAE,CAAC,UAAU,EAAC,UAAU,CAAC,CAAC;AAC7B,QAAI,OAAO,GAAG,IAAI,aAAa,EAAE,CAAC;AAClC,aAAS,UAAU,GAAE;AACnB,YAAI,KAAK,CAAC;AACV,eAAM,IAAI,KAAK,KAAK,GAAG,EAAE,CAAC,IAAI,EAAE,CAAA,AAAC,EAAC;AAC9B,gBAAI,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;AAC/B,mBAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACjB,gBAAG,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,EAAC;AACrB,kBAAE,CAAC,cAAc,CAAC,UAAU,EAAC,UAAU,CAAC,CAAC;AACzC,oBAAI,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AACnC,uBAAO,IAAI,MAAM,CAAC,KAAK,EAAE,CAAC;AAC1B,oBAAI,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AACrC,oBAAI,GAAG,GAAG,IAAI,MAAM,CAAC,MAAM,EAAC,MAAM,CAAC,CAAC;AACpC,oBAAG,GAAG,CAAC,MAAM,EACZ,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACjB,wBAAQ,CAAC,OAAO,CAAC,CAAC;aACrB,MAAI;AACD,uBAAO,IAAI,GAAG,CAAC;aAClB;SACJ;KACF;CACF;;AAED,WAAW,CAAC,UAAS,OAAO,EAAC;AACzB,WAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACrB,WAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AACtB,MAAE,CAAC,EAAE,CAAC,MAAM,EAAC,UAAS,IAAI,EAAC;AACvB,eAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;KAChC,CAAC,CAAC;CACN,CAAC,CAAC","file":"8.unshift-compiled.js","sourcesContent":["var fs = require('fs');\r\nvar rs = fs.createReadStream('./request.txt');\r\n//解析头部\r\nvar StringDecoder = require('string_decoder').StringDecoder;\r\nfunction parseHeader(callback){\r\n  var headers  = '';\r\n  rs.on('readable',onReadable);\r\n  var decoder = new StringDecoder();\r\n  function onReadable(){\r\n    var chunk;\r\n    while(null != (chunk = rs.read())){\r\n        var str  =decoder.write(chunk);\r\n        console.log(str);\r\n        if(str.match(/\\r\\n\\r\\n/)){\r\n            rs.removeListener('readable',onReadable);\r\n            var splits = str.split(/\\r\\n\\r\\n/);\r\n            headers += splits.shift();\r\n            var remain = splits.join('\\r\\n\\r\\n');\r\n            var buf = new Buffer(remain,'utf8');\r\n            if(buf.length)\r\n             rs.unshift(buf);\r\n            callback(headers);\r\n        }else{\r\n            headers += str;\r\n        }\r\n    }\r\n  }\r\n}\r\n\r\nparseHeader(function(headers){\r\n    console.log(headers);\r\n    console.log('======');\r\n    rs.on('data',function(data){\r\n        console.log(data.toString());\r\n    });\r\n});"]}