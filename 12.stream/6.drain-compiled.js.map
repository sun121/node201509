{"version":3,"sources":["6.drain.js"],"names":[],"mappings":";;AAAA,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACvB,IAAI,EAAE,GAAG,EAAE,CAAC,iBAAiB,CAAC,YAAY,EAAC;AACvC,iBAAa,EAAC,EAAE;CACnB,CAAC,CAAC;AACH,YAAY,CAAC,EAAE,EAAC,MAAM,EAAC,MAAM,EAAC,YAAU,EAAE,CAAC,CAAC;AAC5C,SAAS,YAAY,CAAC,MAAM,EAAC,IAAI,EAAC,QAAQ,EAAC,QAAQ,EAAC;AAClD,QAAI,CAAC,GAAG,OAAO,CAAC;AAChB,SAAK,EAAE,CAAC;AACR,aAAS,KAAK,GAAE;AACd,YAAI,EAAE,GAAG,IAAI,CAAC;AACZ,WAAE;AACE,aAAC,IAAI,CAAC,CAAC;AACP,gBAAG,CAAC,IAAI,CAAC,EAAC;AACN,sBAAM,CAAC,KAAK,CAAC,IAAI,EAAC,QAAQ,EAAC,QAAQ,CAAC,CAAC;aACxC,MAAI;AACD,kBAAE,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,EAAC,QAAQ,CAAC,CAAC;AACjC,uBAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;aACnB;SACJ,QAAM,CAAC,GAAC,CAAC,IAAI,EAAE,EAAC;AACjB,YAAG,CAAC,GAAC,CAAC,EAAC;AACH,kBAAM,CAAC,IAAI,CAAC,OAAO,EAAC,KAAK,CAAC,CAAC;SAC9B;KACJ;CACF","file":"6.drain-compiled.js","sourcesContent":["var fs = require('fs');\r\nvar ws = fs.createWriteStream('./test.txt',{\r\n    highWaterMark:16\r\n});// 16k\r\nwriteMillion(ws,'data','utf8',function(){});\r\nfunction writeMillion(writer,data,encoding,callback){\r\n  var i = 1000000;\r\n  write();\r\n  function write(){\r\n    var ok = true;\r\n      do{\r\n          i -= 1;\r\n          if(i == 0){\r\n              writer.write(data,encoding,callback);\r\n          }else{\r\n              ok = writer.write(data,encoding);\r\n              console.log(ok);\r\n          }\r\n      }while(i>0 && ok)\r\n      if(i>0){\r\n          writer.once('drain',write);\r\n      }\r\n  }\r\n}\r\n"]}